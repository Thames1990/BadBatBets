{% extends 'the_platform/base.html' %}

{% block title %}
    {{ block.super }} | {{ request.user.profile }}
{% endblock %}

{% block profile_name %}
    {{ request.user.profile }}
{% endblock %}

{% block content %}
    <table>
        <tr>
            <th>Username</th>
            <td>{{ request.user.username }}</td>
        </tr>
        <tr>
            <th>Account Balance</th>
            <td>{{ request.user.profile.account.balance }}</td>
        </tr>
    </table>
    <hr>
    <grid>
        <div col="1/2" class="border_right">
            <h2>Credit</h2>
            <table>
                <tr>
                    <th>Transaction</th>
                    <th>Amount</th>
                </tr>
                {% for credit in request.user.profile.account.credit_set.all %}
                    <tr>
                        <td>{{ credit.transaction.description }}</td>
                        <td>{{ credit.amount }}</td>
                    </tr>
                {% empty %}
                    <td>No credit is available yet</td>
                {% endfor %}
            </table>
        </div>
        <div col="1/2">
            <h2>Debit</h2>
            <table>
                <tr>
                    <th>Transaction</th>
                    <th>Amount</th>
                </tr>
                {% for debit in request.user.profile.account.debit_set.all %}
                    <tr>
                        <td>{{ debit.transaction.description }}</td>
                        <td>{{ debit.amount }}</td>
                    </tr>
                {% empty %}
                    <td>No debit is available yet</td>
                {% endfor %}
            </table>
        </div>
    </grid>
    <hr>
    <grid>
        <div col="1/2" class="border_right">
            <h2>Resolved Choice Bets</h2>
            {% for resolved_bet in resolved_placed_choice_bets %}
                <a class="card_link" href="{% url 'bets:bet' resolved_bet.placed_on.prim_key %}">
                    <card>
                        <h5>{{ resolved_bet.placed_on.name }}</h5>
                        <hr>
                        <p>{{ resolved_bet.placed_on.description }}</p>
                    </card>
                </a>
            {% empty %}
                <h5>No resolved choice bets are available yet.</h5>
            {% endfor %}
        </div>
        <div col="1/2">
            <h2>Resolved Date Bets</h2>
            {% for resolved_bet in resolved_placed_date_bets %}
                <a class="card_link" href="{% url 'bets:bet' resolved_bet.placed_on.prim_key %}">
                    <card>
                        <h5>{{ resolved_bet.placed_on.name }}</h5>
                        <hr>
                        <p>{{ resolved_bet.placed_on.description }}</p>
                    </card>
                </a>
            {% empty %}
                <h5>No resolved date bets are available yet.</h5>
            {% endfor %}
        </div>
    </grid>
{% endblock %}
