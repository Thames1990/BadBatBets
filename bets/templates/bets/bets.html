{% extends 'the_platform/base.html' %}

{% block title %}
    {{ block.super }} | {{ bet.name }}
{% endblock %}

{% block profile %}
    {{ user.profile }}
{% endblock %}

{% block content %}
    {% if choice_bet %}
        <h1>{{ choice_bet.name }}</h1>
        <table>
            <thead>
            <tr>
                <th>Owner</th>
                <td>{{ choice_bet.owner }}</td>
            </tr>
            </thead>
            <tbody>
            <tr>
                <th>Description</th>
                <td>{{ choice_bet.description }}</td>
            </tr>
            <tr>
                <th>Created</th>
                <td>{{ choice_bet.created }}</td>
            </tr>
            <tr>
                <th>Published</th>
                <td>{{ choice_bet.pub_date }}</td>
            </tr>
            <tr>
                <th>Ends on</th>
                <td>{{ choice_bet.end_date }}</td>
            </tr>
            <tr>
                <th>Resolved</th>
                <td>{{ choice_bet.resolved }}</td>
            </tr>
            </tbody>
        </table>

        {% if user_can_bet %}
            <form action="{% url 'bets:bet_on_bet' choice_bet.prim_key %}" method="post">
                {% csrf_token %}
                <label for="number">Amount</label>
                <input
                    type="number"
                    id="placed"
                    name="placed"
                    min="0"
                    placeholder="Amount"
                    required
                >
                <p style="display: inline;">Available choices: </p>
                {% for choice in choice_bet.choice_set.all %}
                    <input
                        type="radio"
                        id="{{ forloop.counter }}"
                        name="choice"
                        value="{{ choice.description }}"
                        required
                    >
                    <label for="{{ forloop.counter }}">{{ choice.description }}</label>
                {% empty %}
                    <p style="display: inline">No choices available</p>
                {% endfor %}
                <button style="float: right" type="submit">Bet</button>
            </form>
        {% endif %}
    {% elif date_bet %}
        <h1>{{ date_bet.name }}</h1>
        <table>
            <thead>
            <tr>
                <th>Owner</th>
                <td>{{ date_bet.owner }}</td>
            </tr>
            </thead>
            <tbody>
            <tr>
                <th>Description</th>
                <td>{{ date_bet.description }}</td>
            </tr>
            <tr>
                <th>Created</th>
                <td>{{ date_bet.created }}</td>
            </tr>
            <tr>
                <th>Published</th>
                <td>{{ date_bet.pub_date }}</td>
            </tr>
            <tr>
                <th>Period starts on</th>
                <td>{{ date_bet.time_period_start }}</td>
            </tr>
            <tr>
                <th>Period ends on</th>
                <td>{{ date_bet.time_period_end }}</td>
            </tr>
            <tr>
                <th>Resolved</th>
                <td>{{ date_bet.resolved }}</td>
            </tr>
            </tbody>
        </table>

        {% if user_can_bet %}
            <form action="{% url 'bets:bet_on_bet' date_bet.prim_key %}" method="post">
                {% csrf_token %}
                <label for="number">Amount</label>
                <input
                    type="number"
                    id="placed"
                    name="placed"
                    min="0"
                    placeholder="Amount"
                    required
                >
                <label for="date">Date</label>
                <input
                    type="date"
                    id="placed"
                    name="date"
                    min="{{ date_bet.time_period_start|date:"Y-m-d" }}"
                    max="{{ date_bet.time_period_end|date:"Y-m-d" }}"
                    placeholder="Date"
                    required
                >
                <button style="float: right" type="submit">Bet</button>
            </form>
        {% endif %}
    {% endif %}
{% endblock %}
